This folder contains all the software written by the software team.

# TOC
1. [EEG Task (eeg_task.py)](#eeg-task)
2. [XDF to CSV (xdfToCSV.py)](#xdf-to-csv)
3. [Plot XDF (plotxdf.py)](#plot-xdf)





## EEG Task
This is a program for prompting and collecting data. The paradigm was designed by the Data Collection Team.

This software is written by Gunwoo Kim and Aric Shen. 

### Setting Up
For using sounds, consider running `pip install psychopy-sounddevice --upgrade` if you get errors or don't hear any sound. You need to have Psychopy, Numpy, and pylsl. Run `pip install psychopy numpy pylsl`.

### Usage
1. Make sure you are in the source directory. Use the command `cd` to navigate to `EEGTetris/sw/src`.
2. Run `py eeg_task.py`
3. Open LabRecorder and DSI-7 LSL. 
4. Within LabRecorder, you should see two streams in the box "Record from Streams". There should be "EEG_MARKERS" and "DSI7 LSL" (or something along those lines). If you do not see them, click the "Update" button.
   * The EEG_MARKER stream is created by the EEG task program. 
   * Debugging the LSL of the magic hat can be found in (TODO...)
5. When you click the "Start" button in LabRecorder, the task will begin automatically.
6. **MAKR SURE YOU CLICK STOP** once the trial finishes.
7. You should be able to find your recording in the directory specified in "Saving to...".





## XDF to CSV
This program is meant to convert XDF files generated by LabRecorder. 
It also assums that there are two streams in the recordering, specifically stream from the *magic hat* and marker (from task program). **The main purpose of this program is to quickly check if the task program is producing expected data**.

The entire program is written by CHAT GPT. Minor modifications by Gunwoo Kim.

This program may not be used in the ML pipeline if there is a direct way to use XDF in trainning.

### Setting Up
Run `pip install pyxdf pandas numpy`.

### Usage
1. Place the desired xdf file to convert in the directory `xdf`.
2. Make sure you are in `EEGTetris/sw/src`. Run `py xdfToCSV.py`.
3. This should produce two csv files in `./xdf-results`. One file should contain the data from the magic hat and other should contain markers (timestamps). The markers are numbers. 

### Issues
Sometimes there are columns with no marker numbers. 
Not sure if the issue is caused by program. 
It may be an issue in `eeg_task.py`.





## Plot XDF
Plots the csv files converted from `xdfToCSV.py`. 
You may need to open the file itself and put in the name of the files you want to convert in the bottom of the code... 
This program will be updated if we actually end up using it more.

The entire program is written by CHAT GPT. Minor modifications by Gunwoo Kim.